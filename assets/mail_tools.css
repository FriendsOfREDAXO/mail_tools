/**
 * Mail Tools - Statistics Styles
 * Mit Dark-Theme-Unterst√ºtzung via CSS-Variablen
 */

/* === CSS Variables === */
.mail-tools-stats {
    /* Light Theme (Default) */
    --mt-bg-card: #fff;
    --mt-bg-box: #f8f9fa;
    --mt-border: #ddd;
    --mt-border-light: #eee;
    --mt-text: #333;
    --mt-text-muted: #666;
    --mt-text-heading: #333;
    --mt-accent: #3b5998;
    --mt-accent-hover: #2d4373;
    --mt-success: #5cb85c;
    --mt-success-dark: #4cae4c;
    --mt-heatmap-0: #eee;
    --mt-heatmap-1: #c6e48b;
    --mt-heatmap-2: #7bc96f;
    --mt-heatmap-3: #449d44;
    --mt-heatmap-4: #196127;
    --mt-tooltip-bg: #333;
    --mt-tooltip-text: #fff;
}

/* === Dark Theme === */
body.rex-theme-dark .mail-tools-stats,
[data-theme="dark"] .mail-tools-stats {
    --mt-bg-card: #2d3748;
    --mt-bg-box: #1a202c;
    --mt-border: #4a5568;
    --mt-border-light: #4a5568;
    --mt-text: #e2e8f0;
    --mt-text-muted: #a0aec0;
    --mt-text-heading: #e2e8f0;
    --mt-accent: #63b3ed;
    --mt-accent-hover: #4299e1;
    --mt-success: #48bb78;
    --mt-success-dark: #38a169;
    --mt-heatmap-0: #2d3748;
    --mt-heatmap-1: #276749;
    --mt-heatmap-2: #2f855a;
    --mt-heatmap-3: #38a169;
    --mt-heatmap-4: #48bb78;
    --mt-tooltip-bg: #1a202c;
    --mt-tooltip-text: #e2e8f0;
}

/* === Layout === */
.mail-tools-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    gap: 20px;
    margin-bottom: 20px;
}

.mail-tools-stats-row {
    display: flex;
    gap: 20px;
    margin-bottom: 20px;
}

/* === Cards === */
.mail-tools-stats-card {
    background: var(--mt-bg-card);
    border: 1px solid var(--mt-border);
    border-radius: 8px;
    padding: 15px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.mail-tools-stats-card h3 {
    margin: 0 0 15px 0;
    font-size: 16px;
    color: var(--mt-text-heading);
    border-bottom: 1px solid var(--mt-border-light);
    padding-bottom: 10px;
}

/* === Boxes (Statistik-Kacheln) === */
.mail-tools-stats-box {
    flex: 1;
    text-align: center;
    padding: 15px;
    background: var(--mt-bg-box);
    border: 1px solid var(--mt-border-light);
    border-radius: 8px;
}

.mail-tools-stats-number {
    font-size: 32px;
    font-weight: bold;
    color: var(--mt-accent);
}

.mail-tools-stats-label {
    color: var(--mt-text-muted);
    font-size: 13px;
}

/* === Heatmap === */
.mail-tools-heatmap-container {
    overflow-x: auto;
}

.mail-tools-heatmap-table {
    border-collapse: collapse;
    font-size: 11px;
    width: 100%;
}

.mail-tools-heatmap-table th,
.mail-tools-heatmap-table td {
    padding: 4px 2px;
    text-align: center;
    min-width: 28px;
}

.mail-tools-heatmap-table th {
    color: var(--mt-text-muted);
    font-weight: normal;
}

.mail-tools-heatmap-cell {
    border-radius: 2px;
}

.mail-tools-heatmap-cell-0 { 
    background: var(--mt-heatmap-0); 
    color: var(--mt-text-muted); 
}
.mail-tools-heatmap-cell-1 { 
    background: var(--mt-heatmap-1); 
    color: #333; 
}
.mail-tools-heatmap-cell-2 { 
    background: var(--mt-heatmap-2); 
    color: #fff;
    text-shadow: 0 0 2px rgba(0,0,0,0.3);
}
.mail-tools-heatmap-cell-3 { 
    background: var(--mt-heatmap-3); 
    color: #fff;
    text-shadow: 0 0 2px rgba(0,0,0,0.3);
}
.mail-tools-heatmap-cell-4 { 
    background: var(--mt-heatmap-4); 
    color: #fff;
    text-shadow: 0 0 2px rgba(0,0,0,0.3);
}

/* === Top-Listen === */
.mail-tools-top-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.mail-tools-top-list li {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--mt-border-light);
}

.mail-tools-top-list li:last-child {
    border-bottom: none;
}

.mail-tools-top-list-domain {
    font-family: monospace;
    color: var(--mt-text);
}

.mail-tools-top-list-count {
    background: var(--mt-accent);
    color: #fff;
    padding: 2px 8px;
    border-radius: 10px;
    font-size: 12px;
}

.mail-tools-top-list-subject {
    max-width: 250px;
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    color: var(--mt-text);
}

/* === Erfolgsquote === */
.mail-tools-success-bar {
    height: 20px;
    background: var(--mt-border);
    border-radius: 10px;
    overflow: hidden;
    margin: 10px 0;
}

.mail-tools-success-bar-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--mt-success), var(--mt-success-dark));
    transition: width 0.5s ease;
}

.mail-tools-success-stats {
    display: flex;
    justify-content: space-between;
    font-size: 13px;
    color: var(--mt-text-muted);
}

/* === Daily Chart === */
.mail-tools-daily-chart {
    display: flex;
    align-items: flex-end;
    height: 100px;
    gap: 2px;
    padding: 10px 0;
}

.mail-tools-daily-bar {
    flex: 1;
    background: var(--mt-accent);
    border-radius: 2px 2px 0 0;
    min-height: 2px;
    position: relative;
    transition: background 0.2s ease;
}

.mail-tools-daily-bar:hover {
    background: var(--mt-accent-hover);
}

.mail-tools-daily-bar:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 100%;
    left: 50%;
    transform: translateX(-50%);
    background: var(--mt-tooltip-bg);
    color: var(--mt-tooltip-text);
    padding: 4px 8px;
    border-radius: 4px;
    font-size: 11px;
    white-space: nowrap;
    z-index: 10;
}

/* === Helper === */
.mail-tools-text-muted {
    color: var(--mt-text-muted) !important;
}

.mail-tools-help-block {
    color: var(--mt-text-muted);
    font-size: 12px;
    margin-top: -10px;
    margin-bottom: 10px;
}

/* === Responsive === */
@media (max-width: 768px) {
    .mail-tools-stats-row {
        flex-direction: column;
    }
    
    .mail-tools-stats-grid {
        grid-template-columns: 1fr;
    }
}
